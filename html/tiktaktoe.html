<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ticâ€‘Tacâ€‘Toe â€” Single HTML File</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#06b6d4;--muted:#93c5fd}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:linear-gradient(180deg,#071021 0%, #071627 100%); color:#e6eef6; display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .card{
      background:linear-gradient(180deg,rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:14px; padding:20px; width:min(420px,96vw); box-shadow:0 8px 30px rgba(2,6,23,0.7);
    }
    h1{font-size:20px; margin:0 0 10px 0; display:flex; align-items:center; gap:10px}
    .meta{display:flex; justify-content:space-between; align-items:center; margin-bottom:12px}
    .status{font-size:14px; color:var(--muted)}
    .board{display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin:12px 0}
    .cell{aspect-ratio:1/1; background:linear-gradient(180deg,rgba(255,255,255,0.01), rgba(255,255,255,0.00)); border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:48px; cursor:pointer; user-select:none; transition:transform .12s ease, box-shadow .12s ease}
    .cell:active{transform:scale(.98)}
    .cell.disabled{cursor:not-allowed; opacity:.9}
    .cell.x{color:#ffd166; font-weight:700}
    .cell.o{color:#60a5fa; font-weight:700}
    .board.win .cell{opacity:.4}
    .cell.win{opacity:1; box-shadow:0 6px 18px rgba(6,182,212,0.12); transform:translateY(-4px)}
    .controls{display:flex; gap:8px; margin-top:10px; flex-wrap:wrap}
    button{background:transparent; border:1px solid rgba(255,255,255,0.06); color:inherit; padding:8px 10px; border-radius:10px; cursor:pointer}
    button.primary{background:linear-gradient(90deg,var(--accent),#7dd3fc); color:#012033; border:0}
    .score{display:flex; gap:10px; font-size:13px}
    .score div{background:rgba(255,255,255,0.02); padding:6px 8px; border-radius:8px}
    .footer{font-size:12px; color:rgba(230,238,246,0.6); margin-top:12px}
    @media (max-width:420px){ .cell{font-size:36px} h1{font-size:18px} }
  </style>
</head>
<body>
  <main class="card" role="application" aria-label="Tic tac toe game">
    <h1>ðŸŽ® Ticâ€‘Tacâ€‘Toe <small style="font-weight:400;color:rgba(230,238,246,0.6);font-size:12px"></small></h1>
    <div class="meta">
      <div class="status" id="status">Turn: <strong id="turn">X</strong></div>
      <div class="score" aria-hidden="true">
        <div>X: <span id="scoreX">0</span></div>
        <div>O: <span id="scoreO">0</span></div>
        <div>Draws: <span id="scoreD">0</span></div>
      </div>
    </div>

    <div class="board" id="board" role="grid" aria-label="tic tac toe board">
      <!-- 9 cells generated by JS -->
    </div>

    <div class="controls">
      <button id="restart" class="primary">Restart Round</button>
      <button id="resetScores">Reset Scores</button>
      <button id="swap" title="Swap starting player">Swap Start (X/O)</button>
      <button id="hint">Show Hint</button>
    </div>

    <div class="footer" id="footer">Click a square to play. First to make a line of three wins.</div>
  </main>

  <script>
    // Single-file Tic-Tac-Toe
    const boardEl = document.getElementById('board');
    const statusTurn = document.getElementById('turn');
    const statusEl = document.getElementById('status');
    const footer = document.getElementById('footer');

    const scoreXEl = document.getElementById('scoreX');
    const scoreOEl = document.getElementById('scoreO');
    const scoreDEl = document.getElementById('scoreD');

    const restartBtn = document.getElementById('restart');
    const resetScoresBtn = document.getElementById('resetScores');
    const swapBtn = document.getElementById('swap');
    const hintBtn = document.getElementById('hint');

    let cells = Array(9).fill(null);
    let current = 'X';
    let starting = 'X';
    let locked = false;
    let scores = { X:0, O:0, D:0 };

    const winCombos = [
      [0,1,2],[3,4,5],[6,7,8],
      [0,3,6],[1,4,7],[2,5,8],
      [0,4,8],[2,4,6]
    ];

    function createBoard(){
      boardEl.innerHTML = '';
      for(let i=0;i<9;i++){
        const cell = document.createElement('button');
        cell.className = 'cell';
        cell.setAttribute('data-i', i);
        cell.setAttribute('role','gridcell');
        cell.setAttribute('aria-label', 'empty cell');
        cell.addEventListener('click', onCellClick);
        boardEl.appendChild(cell);
      }
      updateUI();
    }

    function onCellClick(e){
      if(locked) return;
      const i = Number(e.currentTarget.dataset.i);
      if(cells[i]) return; // occupied
      makeMove(i, current);
    }

    function makeMove(i, player){
      cells[i] = player;
      renderCell(i);
      const res = checkWinner();
      if(res){
        handleResult(res);
      } else if(cells.every(Boolean)){
        // draw
        scores.D++;
        scoreDEl.textContent = scores.D;
        footer.textContent = 'Draw!';
        locked = true;
      } else {
        current = (current === 'X') ? 'O' : 'X';
        updateUI();
      }
    }

    function renderCell(i){
      const cell = boardEl.querySelector(`[data-i='${i}']`);
      cell.textContent = cells[i] || '';
      cell.classList.toggle('x', cells[i] === 'X');
      cell.classList.toggle('o', cells[i] === 'O');
      cell.classList.toggle('disabled', Boolean(cells[i]) || locked);
      cell.setAttribute('aria-label', cells[i] ? (cells[i] + ' placed') : 'empty cell');
    }

    function updateUI(){
      statusTurn.textContent = current;
      statusTurn.className = current.toLowerCase();
      statusEl.setAttribute('aria-live','polite');
      footer.textContent = `Player ${current}'s turn`;
    }

    function checkWinner(){
      for(const combo of winCombos){
        const [a,b,c] = combo;
        if(cells[a] && cells[a] === cells[b] && cells[a] === cells[c]){
          return { winner: cells[a], combo };
        }
      }
      return null;
    }

    function handleResult(result){
      locked = true;
      const { winner, combo } = result;
      scores[winner]++;
      scoreXEl.textContent = scores.X;
      scoreOEl.textContent = scores.O;
      footer.textContent = `Player ${winner} wins!`;

      // show win state
      boardEl.classList.add('win');
      combo.forEach(i => {
        const c = boardEl.querySelector(`[data-i='${i}']`);
        c.classList.add('win');
      });
    }

    function restart(){
      cells = Array(9).fill(null);
      locked = false;
      current = starting;
      boardEl.classList.remove('win');
      createBoard();
      footer.textContent = 'New round â€” good luck!';
    }

    function resetScores(){
      scores = { X:0, O:0, D:0 };
      scoreXEl.textContent = '0';
      scoreOEl.textContent = '0';
      scoreDEl.textContent = '0';
      restart();
    }

    function swapStarting(){
      starting = starting === 'X' ? 'O' : 'X';
      restart();
    }

    // Very simple hint: choose winning move or blocking move or center/side
    function hint(){
      if(locked) return;
      // try to find winning move for current
      for(let i=0;i<9;i++){
        if(cells[i]) continue;
        cells[i] = current;
        if(checkWinner()){ cells[i] = null; highlightHint(i); return }
        cells[i] = null;
      }
      // block opponent
      const opp = current === 'X' ? 'O' : 'X';
      for(let i=0;i<9;i++){
        if(cells[i]) continue;
        cells[i] = opp;
        if(checkWinner()){ cells[i] = null; highlightHint(i); return }
        cells[i] = null;
      }
      // center
      if(!cells[4]){ highlightHint(4); return }
      // any corner
      const corners=[0,2,6,8];
      for(const c of corners) if(!cells[c]){ highlightHint(c); return }
      // fallback: first empty
      for(let i=0;i<9;i++) if(!cells[i]){ highlightHint(i); return }
    }

    function highlightHint(i){
      const cell = boardEl.querySelector(`[data-i='${i}']`);
      cell.animate([{transform:'scale(1)'},{transform:'scale(1.08)'},{transform:'scale(1)'}], {duration:600, iterations:2});
      // tiny accessibility note
      footer.textContent = `Hint: consider cell ${i+1}`;
    }

    // keyboard support
    window.addEventListener('keydown', (e)=>{
      if(e.key === 'r') restart();
      if(e.key === 'h') hint();
    });

    // wire up buttons
    restartBtn.addEventListener('click', restart);
    resetScoresBtn.addEventListener('click', resetScores);
    swapBtn.addEventListener('click', ()=>{ swapStarting(); statusEl.textContent = `Starting player: ${starting}` });
    hintBtn.addEventListener('click', hint);

    // initialize
    createBoard();
  </script>
</body>
</html>
